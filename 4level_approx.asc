Version 4
SHEET 1 2440 680
WIRE 400 -688 304 -688
WIRE 560 -688 480 -688
WIRE 736 -544 736 -624
WIRE 816 -544 816 -624
WIRE 304 -528 304 -688
WIRE 384 -528 304 -528
WIRE 560 -528 560 -688
WIRE 560 -528 464 -528
WIRE 848 -496 848 -576
WIRE 928 -496 928 -576
WIRE 304 -464 304 -528
WIRE 384 -464 304 -464
WIRE 560 -464 560 -528
WIRE 560 -464 464 -464
WIRE 960 -432 960 -512
WIRE 1040 -432 1040 -512
WIRE 304 -400 304 -464
WIRE 384 -400 304 -400
WIRE 560 -400 560 -464
WIRE 560 -400 464 -400
WIRE 304 -304 304 -400
WIRE 320 -304 304 -304
WIRE 448 -304 400 -304
WIRE 480 -304 448 -304
WIRE 560 -304 560 -400
WIRE 304 -208 304 -304
WIRE 368 -208 304 -208
WIRE 448 -208 448 -304
WIRE 480 -208 448 -208
WIRE 560 -208 560 -304
WIRE 304 -112 304 -208
WIRE 336 -112 304 -112
WIRE 448 -112 448 -208
WIRE 448 -112 416 -112
WIRE 480 -112 448 -112
WIRE 560 -112 560 -208
WIRE -576 -96 -656 -96
WIRE -480 -96 -576 -96
WIRE -384 -96 -480 -96
WIRE -480 -64 -480 -96
WIRE -576 -32 -576 -96
WIRE 304 -32 304 -112
WIRE 304 -32 288 -32
WIRE 336 -32 304 -32
WIRE 448 -32 448 -112
WIRE 448 -32 416 -32
WIRE 480 -32 448 -32
WIRE 560 -32 560 -112
WIRE 448 16 448 -32
WIRE 304 48 304 -32
WIRE 448 48 448 16
WIRE 560 48 560 -32
WIRE -576 64 -576 48
WIRE -480 64 -480 16
WIRE -384 64 -384 -16
WIRE -576 80 -576 64
WIRE -480 80 -480 64
WIRE -384 80 -384 64
WIRE 384 112 304 112
WIRE 448 112 384 112
WIRE 560 112 448 112
WIRE 384 144 384 112
WIRE -656 160 -656 -96
WIRE -576 160 -656 160
WIRE -480 160 -576 160
WIRE -384 160 -480 160
FLAG 384 144 0
FLAG 448 16 U1
IOPIN 448 16 Out
FLAG 288 -32 U0
IOPIN 288 -32 Out
FLAG 560 -32 U2
IOPIN 560 -32 Out
FLAG 832 96 0
FLAG 832 16 dV21
IOPIN 832 16 In
FLAG 960 -432 0
FLAG 736 -544 0
FLAG 848 -496 0
FLAG -480 160 0
FLAG -576 64 i01
IOPIN -576 64 Out
FLAG -480 64 i02
IOPIN -480 64 Out
FLAG -384 64 i12
IOPIN -384 64 Out
SYMBOL cap 288 48 R0
SYMATTR InstName C10
SYMATTR Value {C10}
SYMBOL cap 432 48 R0
SYMATTR InstName C12
SYMATTR Value {C12}
SYMBOL res 432 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 60 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {R10}
SYMBOL bi 416 -112 R90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 -31 144 VTop 2
SYMATTR InstName I10
SYMATTR Value I=V(U1)*A10
SYMBOL bi 464 -528 R90
WINDOW 0 -35 35 VBottom 2
WINDOW 3 -90 35 VTop 2
SYMATTR InstName I20
SYMATTR Value I=V(U2)*A20
SYMBOL cap 544 48 R0
SYMATTR InstName C20
SYMATTR Value {C20}
SYMBOL res 576 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 61 60 VBottom 2
SYMATTR InstName R21
SYMATTR Value {R21}
SYMBOL bi 560 -112 R90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 -33 -64 VTop 2
SYMATTR InstName I21
SYMATTR Value I=V(U2)*A21
SYMBOL res 480 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 28 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value {R20}
SYMBOL bv 832 0 R0
SYMATTR InstName B1
SYMATTR Value V=V(U2)-V(U1)
SYMBOL bi 960 -512 M90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 -84 128 VTop 2
SYMATTR InstName I21_out
SYMATTR Value I=(B21*(V(U2)-V(U1)))
SYMBOL res 1056 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL bi 736 -624 M90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 -84 128 VTop 2
SYMATTR InstName I20_out
SYMATTR Value I=(B20*(V(U2)-V(U0)))
SYMBOL res 832 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL bi 848 -576 M90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 -84 128 VTop 2
SYMATTR InstName I10_out
SYMATTR Value I=(B10*(V(U1)-V(U0)))
SYMBOL res 944 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL res 496 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20_S
SYMATTR Value R=1/(B20*I(I_in02))
SYMBOL res 576 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 -130 VTop 2
SYMATTR InstName R21_S
SYMATTR Value R=(1/(B21*(k21_BB*I(R21_S)+I(I_in12))))
SYMBOL res 416 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 235 VTop 2
SYMATTR InstName R10_S
SYMATTR Value R=(1/(B10*(k10_BB*I(R10_S)+I(I_in01))))
SYMBOL res 576 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 25 -179 VTop 2
SYMATTR InstName R21_ASE
SYMATTR Value R=1/(k21_AB*B21*(I(I21)+I(R21_ASE)))
SYMBOL res 464 -224 R90
WINDOW 0 0 73 VBottom 2
WINDOW 3 27 202 VTop 2
SYMATTR InstName R10_ASE
SYMATTR Value R=1/(k10_AB*B10*(I(I10)+I(R10_ASE)))
SYMBOL current -576 -32 R0
WINDOW 0 -33 -5 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I_in01
SYMATTR Value PULSE(1u 10m 300u 0 0 100u 300u 1000)
SYMBOL current -480 -64 R0
WINDOW 0 -30 -4 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I_in02
SYMATTR Value PULSE(1u 100m 0 0 0 20m 15m 5)
SYMBOL current -384 -96 R0
WINDOW 0 37 47 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I_in12
SYMATTR Value PULSE(1u 10m 600u 0 0 100u 400u 1000)
SYMBOL res 480 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 -130 VTop 2
SYMATTR InstName R20_ASE
SYMATTR Value R=1/(k20_AB*B20*(I(I20)+I(R20_ASE)))
SYMBOL res -592 64 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res -496 64 R0
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res -400 64 R0
SYMATTR InstName R6
SYMATTR Value 1
TEXT -720 -240 Left 2 !.tran 0 310u 290u
TEXT 160 -88 Left 2 ;Relaxation
TEXT 176 0 Left 2 ;Boltzman
TEXT 264 136 Left 2 ;0 level
TEXT 416 136 Left 2 ;1 level
TEXT 208 176 Left 2 ;MAIN 3 level diagram equivalent
TEXT -680 -120 Left 2 ;probe pulse
TEXT 536 136 Left 2 ;2 level
TEXT -392 -120 Left 2 ;probe pulse
TEXT -536 -120 Left 2 ;pump pulse
TEXT -736 -376 Left 2 !.param R10=100K R21=200K R20=400K A10=50m A21=5m A20=100u
TEXT 1032 -56 Left 2 ;2_1 inversion
TEXT -736 -336 Left 2 !.param C10=1u C12=1u C20=1u B10=100m B21=100m B20=100m
TEXT -752 -208 Left 2 !.ic V(U0)=1 V(U1)=0 V(U2)=0
TEXT -600 -296 Left 2 !.param k21_AB=1u k21_BB=200 k10_AB=1u k10_BB=1u k20_AB=1u
TEXT -392 -208 Left 2 !.step param k21_BB_ list . 1 . 10 . 100
